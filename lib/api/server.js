// Generated by CoffeeScript 1.6.3
var Handler, http;

http = require('http');

Handler = require('./handler');

module.exports.create = function(config) {
  var local;
  return local = {
    server: void 0,
    handler: Handler.create(config).handle,
    listen: function(callback) {
      var hostname, listenArgs, port;
      if (!(function() {
        try {
          return listenArgs = config.http.listen;
        } catch (_error) {}
      })()) {
        return;
      }
      port = parseInt(listenArgs.port);
      hostname = listenArgs.hostname;
      local.server = http.createServer(function(req, res) {
        return local.handler(req, res);
      });
      return local.server.listen(port, hostname, function() {
        return callback(null, local);
      });
    },
    close: function(callback) {
      try {
        return local.server.close(callback);
      } catch (_error) {}
    }
  };
};
