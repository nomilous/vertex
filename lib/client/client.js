// Generated by CoffeeScript 1.6.3
var Client;

Client = require('engine.io-client');

module.exports = function(config) {
  var local;
  return local = {
    socket: void 0,
    log: {
      info: function(message, objects) {
        return console.log({
          TODO: {
            'log.info': {
              message: message,
              objects: objects
            }
          }
        });
      }
    },
    status: {
      value: 'pending',
      at: new Date
    },
    connect: function() {
      var socket;
      if (local.socket != null) {
        return local.reconnect();
      }
      local.socket = socket = new Client.Socket(config.connect.uri);
      return socket.on('error', function(err) {
        var interval;
        try {
          if (err.description.code === 'ECONNREFUSED') {
            interval = ((function() {
              try {
                return config.connect.interval;
              } catch (_error) {}
            })()) || 1000;
            return local.reconnecting = setInterval(local.reconnect, interval);
          }
        } catch (_error) {}
      });
    },
    reconnecting: void 0,
    reconnect: function() {},
    close: function() {}
  };
};
