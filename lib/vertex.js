// Generated by CoffeeScript 1.6.3
var Http, Hub, Q, deferred, v4, _ref;

v4 = require('node-uuid').v4;

Http = require('./www/http');

Hub = require('./hub/hub');

_ref = require('decor'), Q = _ref.Q, deferred = _ref.deferred;

module.exports.create = function(config) {
  var title, uuid;
  title = config.title || 'Untitled Vertex';
  uuid = config.uuid || v4();
  return Q.all([Http.create(config).listen(), Hub.create(config).listen()]).spread(function(www, hub) {
    if (www != null) {
      console.log('www listening', www.server.address());
    }
    if (hub != null) {
      return console.log('hub listening', hub.transport.address());
    }
  }, function(error) {
    console.log(error.stack);
    return process.exit(1);
  });
};
